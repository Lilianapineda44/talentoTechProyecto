<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet" >
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/styles_graficos.css">
    <link rel="stylesheet" href="../css/responsive.css">
     
    
</head>
<body class="inicio">


    <div class="container-fluid" id="contenedor-menu">
  
        <img src="../assets/img/logo_proyecto.png" id="logo">
        

        <ul class="nav nav-pills" id="menu" >
            <li class="nav-item">
                <a href="inicio.html" class="nav-link" >
                    <img src="../assets/img/hogar.png" id="logo_inicio">
                </a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="simulador.html" >Consumo eléctrico</a>
            </li>

            <li class="nav-item">
                <a class="nav-link" href="sobreNosotros.html" > Sobre nosotros</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="contactanos.html" >Contactanos</a>
            </li>
        </ul>

    </div>


    <div class="container-fluid" id="formulario" >
  ...
    <div class="mb-3">
    <label for="calculoEnergia" class="form-label" style="color: #e5e5e5; margin-left: 150px; margin-bottom: 20px; margin-top: 15px;">CONSUMO DE ENERGÍA</label>
    <input type="number" class="form-control" id="calculoEnergia" style="width: 400px; margin-left: 40px;" placeholder="Ingrese el número de KWh consumidos">
    </div>

    <div>
           <button type="button" class="btn btn-primary btn-lg" id="calcular" style="margin-left: 180px;" onclick="calcularPorcentajeEnergiaRenovable()">Calcular</button>
    </div>
 
    
    <h1 class="display-4" id="titulo-simulador">Simula tu consumo de energía en KWh</h1>

    <script>
            const datosProduccionEnergia = {
             
            fuentes: [
                { nombre: "Solar", tipo: "renovable", capacidadInstalada: 30000, produccion: 25000 },
                { nombre: "Eólica", tipo: "renovable", capacidadInstalada: 40000, produccion: 35000 },
                { nombre: "Hidroeléctrica", tipo: "renovable", capacidadInstalada: 25000, produccion: 20000 },
                { nombre: "Geotérmica", tipo: "renovable", capacidadInstalada: 5000, produccion: 4000 },
                { nombre: "Carbón", tipo: "no-renovable", capacidadInstalada: 80000, produccion: 70000 },
                { nombre: "Gas Natural", tipo: "no-renovable", capacidadInstalada: 60000, produccion: 55000 }
            ]
        };

    
        function calcularResultadosEnergeticos(consumoUsuarioKWh, datosEnergia) {
            
            const produccionRenovableTotal = datosEnergia.fuentes
                .filter(fuente => fuente.tipo === "renovable")
                .reduce((sum, fuente) => sum + fuente.produccion, 0);

            const produccionTotalGlobal = datosEnergia.fuentes
                .reduce((sum, fuente) => sum + fuente.produccion, 0);


            if (produccionTotalGlobal === 0) {
                return {
                    capacidadRenovableTotal: 0,
                    proporcionRenovableGlobal: 0,
                    porcentajeRenovableConsumoUsuario: 0
                };
            }
            
        
            const proporcionRenovableGlobal = produccionRenovableTotal / produccionTotalGlobal;
            
            
            const porcentajeRenovableConsumoUsuario = proporcionRenovableGlobal * 100;
            
            // Cálculo capacidad renovable total
            const capacidadRenovableTotal = datosEnergia.fuentes
                .filter(fuente => fuente.tipo === "renovable")
                .reduce((sum, fuente) => sum + fuente.capacidadInstalada, 0);

            // Resultados redondeados
            return {
                capacidadRenovableTotal: capacidadRenovableTotal.toFixed(2),
                proporcionRenovableGlobal: porcentajeRenovableConsumoUsuario.toFixed(2),
                porcentajeRenovableConsumoUsuario: porcentajeRenovableConsumoUsuario.toFixed(2)
            };
        }

        // --- Eventos ---

        document.addEventListener('DOMContentLoaded', () => {
            const inputConsumo = document.getElementById('calculoEnergia');
            const boton = document.getElementById('calcular');

            // Verificación
            if (!inputConsumo || !boton) {
                console.error("Error: No se encontró el input 'calculoEnergia' o el botón 'calcular'.");
                return;
            }

            
            boton.addEventListener('click', () => {
                // valor del input y convertirlo a  número
                const consumoElectricoUsuario = parseFloat(inputConsumo.value);

                // Validación entrada del usuario
                if (isNaN(consumoElectricoUsuario) || consumoElectricoUsuario < 0) {
                    alert("Por favor, ingrese un valor numérico positivo para el consumo.");
                    return;
                }

        
                const resultados = calcularResultadosEnergeticos(consumoElectricoUsuario, datosProduccionEnergia);
                
                
                alert(
                    `Análisis Energético del Usuario:\n` +
                    `Consumo total: ${consumoElectricoUsuario} kWh\n` +
                    `Capacidad instalada renovable total: ${resultados.capacidadRenovableTotal} kWh\n` +
                    `Proporción de energía renovable en la producción total: ${resultados.proporcionRenovableGlobal}%\n` +
                    `Porcentaje de energía renovable en su consumo total: ${resultados.porcentajeRenovableConsumoUsuario}%`
                );

            });
        });

    </script>

    </div>


    <div class="container-fluid" id="contenedor_grafico">

        <h1 class="display-3" id="titulo_datos_historicos" >Datos Históricos Energía Renovable</h1>

        <div class="container-fluid" id="grafico_historico_barras">
            
            <div>
                <canvas id="myChart"></canvas>
            </div>

            <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
            <script src="../javascript/promedio_renovable.js"></script>

            <script> /*Produccion energia renovable desde 1965 hasta 2022*/
                const ctx = document.getElementById('myChart');

                var labels = [];
                var values = [];


                data.forEach(element => {
                    labels.push(element.label);
                    values.push(element.value);
                });

                new Chart(ctx, {
                    type: 'bar',
                    data: {
                    labels: labels,
                    datasets: [{
                        label: 'Promedio de energia renovable (Periodo 1965 - 2022)',
                        data: values,
                        backgroundColor:["#00b4d8"],
                        borderWidth: 1
                    }]
                    },
                    options: {
                    scales: {
                        y: {
                        beginAtZero: true
                        }
                    }
                    }
                });

            </script>

        </div>


        <a class="btn btn-primary" id="botonGrafico_barras" role="button" href="grafico_barras.html" > Producción de energía por fuente</a>
        <br><br>
        <a class="btn btn-primary" id="botonGrafico_torta" role="button" href="grafico_torta.html" > Participación Energía Renovable</a>
        <br><br>
        <a class="btn btn-primary" id="botonGrafico_lineas" role="button" href="grafico_lineas.html" > Capacidad instalada Energía Renovable</a>
        <br><br>
        <a class="btn btn-primary" id="botonGrafico_areas" role="button" href="grafico_areas.html" > Consumo Energía Renovable y Convencional</a>
    </div>

    

</body>

<footer id="footer" style="margin-top: 50px;">

    <div class="container-fluid" id="logo_footer">
        <img src="../assets/img/logo_proyecto.png" >
    </div>

    <div class="container-fluid" id="oficina">
       <ul> 
            <li class="ubicacion">
                UBICACIÓN
            </li><br>
            <li class="oficinas">
                Oficinas Valle de Aburra                                                                
            </li><br>
            <li class="oficinas">
                Medellín <br>Carrera 45 # 78-96                                                               
            </li><br>
            <li class="oficinas">
               Bello<br>Calle 85 A 103-81                                                                 
            </li>
        </ul>
    </div>

    <div class="container-fluid" id="redes">
       <ul> 
            <li class="plataformas">
                REDES
            </li><br>
            <li class="red_social">
                <a href="https://www.instagram.com/">INSTAGRAM</a>                                                               
            </li><br>
            <li class="red_social">
                <a href="https://www.facebook.com/?locale=es_LA">FACEBOOK</a>                                                                
            </li><br>
        </ul>
    </div>

    <div class="container-fluid" id="contacto">
       <ul> 
            
            <li class="contactanos">
                CONTACTO
            </li><br>
            <li class="contactos">
                renova2025@gmail.com
            </li><br>
            <li class="contactos">
                +57 3005267849                                                               
            </li><br>
            <li class="contactos">
                +57 3006307541                                                                
            </li><br>
        </ul>
    </div>

    <div class="container-fluid" id="derechos">
        <p>&copy; 2025 Renova . Todos los derechos reservados.</p>
        <p>
            <a href="/politica-privacidad" style="color: #555; text-decoration: none; margin-bottom: 50px; ">Política de Privacidad</a> |
            <a href="/terminos-condiciones" style="color: #555; text-decoration: none; ">Términos y Condiciones</a>
        </p>
    </div>
   
</footer>

</html>